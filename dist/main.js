"use strict";var B=Object.create;var d=Object.defineProperty;var X=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var U=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty;var p=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),j=(e,r)=>{for(var t in r)d(e,t,{get:r[t],enumerable:!0})},_=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of N(r))!R.call(e,o)&&o!==t&&d(e,o,{get:()=>r[o],enumerable:!(n=X(r,o))||n.enumerable});return e};var K=(e,r,t)=>(t=e!=null?B(U(e)):{},_(r||!e||!e.__esModule?d(t,"default",{value:e,enumerable:!0}):t,e)),V=e=>_(d({},"__esModule",{value:!0}),e);var v=p((le,C)=>{"use strict";var F=require("fs"),x;function Y(){try{return F.statSync("/.dockerenv"),!0}catch{return!1}}function H(){try{return F.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}C.exports=()=>(x===void 0&&(x=Y()||H()),x)});var q=p((fe,y)=>{"use strict";var J=require("os"),Q=require("fs"),O=v(),k=()=>{if(process.platform!=="linux")return!1;if(J.release().toLowerCase().includes("microsoft"))return!O();try{return Q.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!O():!1}catch{return!1}};process.env.__IS_WSL_TEST__?y.exports=k:y.exports=k()});var T=p((de,D)=>{"use strict";D.exports=(e,r,t)=>{let n=o=>Object.defineProperty(e,r,{value:o,enumerable:!0,writable:!0});return Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get(){let o=t();return n(o),o},set(o){n(o)}}),e}});var z=p((pe,L)=>{var Z=require("path"),ee=require("child_process"),{promises:g,constants:G}=require("fs"),m=q(),re=v(),P=T(),M=Z.join(__dirname,"xdg-open"),{platform:u,arch:W}=process,te=()=>{try{return g.statSync("/run/.containerenv"),!0}catch{return!1}},E;function oe(){return E===void 0&&(E=te()||re()),E}var ne=(()=>{let e="/mnt/",r;return async function(){if(r)return r;let t="/etc/wsl.conf",n=!1;try{await g.access(t,G.F_OK),n=!0}catch{}if(!n)return e;let o=await g.readFile(t,{encoding:"utf8"}),a=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(o);return a?(r=a.groups.mountPoint.trim(),r=r.endsWith("/")?r:`${r}/`,r):e}})(),I=async(e,r)=>{let t;for(let n of e)try{return await r(n)}catch(o){t=o}throw t},h=async e=>{if(e={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...e},Array.isArray(e.app))return I(e.app,c=>h({...e,app:c}));let{name:r,arguments:t=[]}=e.app||{};if(t=[...t],Array.isArray(r))return I(r,c=>h({...e,app:{name:c,arguments:t}}));let n,o=[],a={};if(u==="darwin")n="open",e.wait&&o.push("--wait-apps"),e.background&&o.push("--background"),e.newInstance&&o.push("--new"),r&&o.push("-a",r);else if(u==="win32"||m&&!oe()&&!r){let c=await ne();n=m?`${c}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,o.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),m||(a.windowsVerbatimArguments=!0);let s=["Start"];e.wait&&s.push("-Wait"),r?(s.push(`"\`"${r}\`""`,"-ArgumentList"),e.target&&t.unshift(e.target)):e.target&&s.push(`"${e.target}"`),t.length>0&&(t=t.map(f=>`"\`"${f}\`""`),s.push(t.join(","))),e.target=Buffer.from(s.join(" "),"utf16le").toString("base64")}else{if(r)n=r;else{let c=!__dirname||__dirname==="/",s=!1;try{await g.access(M,G.X_OK),s=!0}catch{}n=process.versions.electron||u==="android"||c||!s?"xdg-open":M}t.length>0&&o.push(...t),e.wait||(a.stdio="ignore",a.detached=!0)}e.target&&o.push(e.target),u==="darwin"&&t.length>0&&o.push("--args",...t);let l=ee.spawn(n,o,a);return e.wait?new Promise((c,s)=>{l.once("error",s),l.once("close",f=>{if(!e.allowNonzeroExitCode&&f>0){s(new Error(`Exited with code ${f}`));return}c(l)})}):(l.unref(),l)},b=(e,r)=>{if(typeof e!="string")throw new TypeError("Expected a `target`");return h({...r,target:e})},se=(e,r)=>{if(typeof e!="string")throw new TypeError("Expected a `name`");let{arguments:t=[]}=r||{};if(t!=null&&!Array.isArray(t))throw new TypeError("Expected `appArguments` as Array type");return h({...r,app:{name:e,arguments:t}})};function $(e){if(typeof e=="string"||Array.isArray(e))return e;let{[W]:r}=e;if(!r)throw new Error(`${W} is not supported`);return r}function A({[u]:e},{wsl:r}){if(r&&m)return $(r);if(!e)throw new Error(`${u} is not supported`);return $(e)}var w={};P(w,"chrome",()=>A({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));P(w,"firefox",()=>A({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));P(w,"edge",()=>A({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));b.apps=w;b.openApp=se;L.exports=b});var ae={};j(ae,{activate:()=>ce});module.exports=V(ae);var i=K(require("vscode")),ie=z();function ce(e){let r=new S;e.subscriptions.push(r)}var S=class{constructor(){let r=[],t=i.commands.registerCommand("vscode-open.openFileWithDefaultApplication",n=>{this.open(n)});r.push(t),this._disposable=i.Disposable.from(...r)}dispose(){this._disposable.dispose()}open(r){var o;if(r!=null&&r.scheme){console.log("Opening from uri",r.toString()),this.openFile(r.toString());return}let t=i.window.activeTextEditor;if(t!=null&&t.document.uri){console.log("Opening from editor",t.document.uri.toString()),this.openFile(t.document.uri.toString());return}let{uri:n}=(o=i.window.tabGroups.activeTabGroup.activeTab)==null?void 0:o.input;if(n){console.log("Opening from tab",n.toString()),this.openFile(n.toString());return}i.window.showInformationMessage("No editor is active. Select an editor or a file in the Explorer view.")}openFile(r){try{ie(decodeURIComponent(r)).then(n=>{n.on("exit",o=>{o!=0&&i.window.showInformationMessage("Couldn't open file.")})})}catch(t){i.window.showInformationMessage("Couldn't open file."),t instanceof Error&&console.error(t.stack)}}};0&&(module.exports={activate});
